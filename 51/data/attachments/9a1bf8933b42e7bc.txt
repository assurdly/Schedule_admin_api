const jsonData = pm.response.json();

pm.test("Status code is 200 OK", function () {
    pm.response.to.have.status(200);
});

pm.test("Billers are returned as an array", function () {
    pm.expect(jsonData.data).to.be.an("array");
    pm.expect(jsonData.data.length).to.be.above(0);
});

pm.test("Each biller has required fields", function () {
    const requiredFields = ["id", "service_product_id", "has_package", "amount"];
    jsonData.data.forEach(biller => {
        requiredFields.forEach(field => {
            pm.expect(biller).to.have.property(field);
        });
    });
});
