const jsonData = pm.response.json();

pm.test("Status code is 200 OK", function () {
    pm.response.to.have.status(200);
});

pm.test("Products are returned as an array", function () {
    pm.expect(jsonData.data).to.be.an("array");
    pm.expect(jsonData.data.length).to.be.above(0);
});

pm.test("Each product has required fields", function () {
    const requiredFields = ["id", "name","amount"];
    jsonData.data.forEach(product => {
        requiredFields.forEach(field => {
            pm.expect(product).to.have.property(field);
        });
    });
});
